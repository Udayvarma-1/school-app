<!-- FormGroup method -->

<form [formGroup]="allstudentsForm">
    <div class="parent">
        <div class="child">
            <label>Name:</label>
            <input type="text" formControlName="name">
            <div class="text-danger"
                *ngIf="allstudentsForm.get('name')?.touched && allstudentsForm.get('name')?.invalid">
                <p *ngIf="allstudentsForm.get('name')?.errors?.['required']">Name is required</p>
                <p *ngIf="allstudentsForm.get('name')?.errors?.['minlength']">Name should contain atleast 3 charectors
                </p>
            </div>
            <br><br>
            <label>Age:</label>
            <input type="number" formControlName="age">
            <div class="text-danger" *ngIf="allstudentsForm.get('age')?.touched && allstudentsForm.get('age')?.invalid">
                <p *ngIf="allstudentsForm.get('age')?.errors?.['required']">Age is invalid</p>
                <p *ngIf="allstudentsForm.get('age')?.errors?.['min']">age is contain atleast 5 years</p>
                <p *ngIf="allstudentsForm.get('age')?.errors?.['max']">age is contain valid for highest 35 years</p>
            </div>
            <br><br>
            <label>Id:</label>
            <input type="text" formControlName="id">
            <br><br>
            <!-- <label>percentage:</label>
            <input type="text" formControlName="percentage">
            <br><br> -->
            <label>Class:</label>
            <input type="text" formControlName="class">
            <br><br>
            <label>Email:</label>
            <input type="text" formControlName="email">
            <br><br>
            <label>Password:</label>
            <input type="text" formControlName="password">
            <br><br>

            <!-- nested FormGroup Method -->

            <div formGroupName="address">
                <label>HNo:</label>
                <input type="text" formControlName="hno">
                <br><br>
                <label>STATE:</label>
                <input type="text" formControlName="state">
                <div class="text-danger"
                    *ngIf="allstudentsForm.get('address')?.get('state')?.touched && allstudentsForm.get('address')?.get('state')?.invalid">
                    <p *ngIf="allstudentsForm.get('address')?.get('state')?.errors?.['required']">state is required</p>
                </div>
                <br><br>
                <label>PIN:</label>
                <input type="text" formControlName="pin">
                <br><br>
            </div>

            <label>type:</label>
            <input type="radio" name="type" formControlName="type" value="daysScholor">
            <label>DaysScholor</label>
            <input type="radio" name="type" formControlName="type" value="residential">
            <label>Residential</label>

            <div *ngIf="allstudentsForm.get('type')?.value == 'daysScholor'">
                <label>BusFee:</label>
                <input type="number" formControlName="busfee">
                <br>
            </div>

            <div *ngIf="allstudentsForm.get('type')?.value =='residential'">
                <label>HostelFee:</label>
                <input type="number" formControlName="hostelfee">
                <br>
            </div>
            <br><br>

            <!-- FormArray Method -->

            <button class="btn btn-primary" (click)="addCard()">add card</button>

            <div formArrayName="cards">
                <div *ngFor="let card of cardsFormArray.controls; let i=index">
                    <div formGroupName="{{i}}">

                        <label>No:</label>
                        <input type="number" formControlName="no">
                        <br><br>
                        <label>EXP:</label>
                        <input type="month" formControlName="exp">
                        <br><br>
                        <label>CVV:</label>
                        <input type="number" formControlName="cvv">
                        <div class="text-danger"
                            *ngIf="cardsFormArray.controls[i]?.get('cvv')?.touched && cardsFormArray.controls[i]?.get('cvv')?.invalid">
                            <p *ngIf="cardsFormArray.controls[i]?.get('cvv')?.errors?.['required']">CVV is required</p>
                            <p *ngIf="cardsFormArray.controls[i]?.get('cvv')?.errors?.['min']">CVV atleast 100</p>
                            <p *ngIf="cardsFormArray.controls[i]?.get('cvv')?.errors?.['max']">CVV atmost 999</p>
                        </div>
                        <br><br>
                        <button class="btn btn-success" (click)="deletecard(i)">delete</button>
                        <br><br>
                    </div>
                </div>
            </div>

            <!-- form Array method -->

            <button class="btn btn-warning" (click)=" addstudentmarks()">MARKS</button>
            <div formArrayName="marks">
                <div *ngFor="let mark of marksFormArray.controls; let i=index">
                    <div formGroupName={{i}}>
                        <label>MARKS:</label>
                        <input type="number" formControlName="marks">
                        <br><br>
                        <label>YEAR:</label>
                        <input type="number" formControlName="year">
                        <br><br>
                        <label>PERCENTAGE:</label>
                        <input type="number" formControlName="percentage">
                        <br><br>
                        <button class="btn btn-success" (click)="deletemarks(i)">delete</button>
                    </div>
                </div>
            </div>


            <button class="btn btn-danger" (click)="submit()">Submit</button>
        </div>
    </div>


</form>